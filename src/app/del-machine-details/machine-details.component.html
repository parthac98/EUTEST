<!-- ============================================================== -->
<!-- Preloader - style you can find in spinners.css -->
<!-- ============================================================== -->
<!--<div class="preloader">
    <svg class="circular" viewBox="25 25 50 50">
        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" /> </svg>
</div>-->
<!-- ============================================================== -->
<!-- Main wrapper - style you can find in pages.scss -->
<!-- ============================================================== -->
<div id="main-wrapper">
    <!-- ============================================================== -->
    <!-- Topbar header - starts - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <app-header></app-header>
    <!-- ============================================================== -->
    <!-- Topbar header - ends - style you can find in pages.scss -->
    <!-- ============================================================== -->
    
    <div class="page-wrapper-blank">
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
            
        <div class="wrapper d-flex align-items-stretch">
        
        <!-- ============================================================== -->
        <!-- Sidebar - Menu - Starts -->
        <!-- ============================================================== -->
        <app-sidebar></app-sidebar>
        <!-- ============================================================== -->
        <!-- Sidebar - Menu - Ends -->
        <!-- ============================================================== --> 

    <!-- Page Content  -->
        <div class="grid" style="width: 100%">
            <div class="container" style="margin-top: 20px !important; padding: 0 20px 20px 30px;">
            <div class="table-responsive" style="padding-bottom: 6%;">
                <h3>View Machines 
                    <span class="pull-right" style="padding-bottom: 10px;">  
                        <a routerLink='/machine-management' type="button" class="btn btn-dark btn-lg">
                            <i class="fa fa-arrow-left" aria-hidden="true"></i> &nbsp; Back
                        </a> 
                    </span>
                </h3>	  
                
                <hr> 
		
                <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
                    <ng-container matColumnDef="machineIdentifier">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Machine Identifier </th>
                    <td mat-cell *matCellDef="let element"> {{ element.machineIdentifier }} </td>
                    </ng-container>

                    <ng-container matColumnDef="processName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Process Name </th>
                    <td mat-cell *matCellDef="let element"> {{ element.processName }} </td>
                    </ng-container>

                    <ng-container matColumnDef="machineMakeName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Machine Make </th>
                    <td mat-cell *matCellDef="let element"> {{ element.machineMakeName }} </td>
                    </ng-container>

                    <ng-container matColumnDef="purchaseDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Purchase Date </th>
                    <td mat-cell *matCellDef="let element"> {{ element.purchaseDate | date }} </td>
                    </ng-container>

                    <ng-container matColumnDef="inspectedDayAndTime">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Inspected Day And Time </th>
                    <td mat-cell *matCellDef="let element"> {{ element.machineInspectionScheduleVO.inspectionDateTime | date:'MMM d, y, h:mm:ss a' }} </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element">
                      <button class="btn btn-primary fa fa-info-circle" (click)="getSingleMachineDetails(element.machineId)" data-toggle="modal" data-target="#viewMachineModal" style="margin-right: 4px;"></button>
                      <button class="btn btn-info fa fa-eye" (click)="inspectMachine(element.machineIdentifier)" style="margin-right: 4px;"></button> 
                      <!--<button class="btn btn-warning fa fa-pencil-square" style="margin-right: 4px;"></button>-->
                      <button class="btn btn-danger fa fa-trash" (click)="deleteMachine(element.machineId)"></button>
                    </td>
                    </ng-container>
                    
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[10, 20, 40]" showFirstLastButtons></mat-paginator>
                <hr>
                <!--<table class="table" style="border: 1px solid #eee; margin-top: 20px;">
                  <thead>
                      <tr>
                          <th>Machine Name</th>
                          <th>Process Name</th>
                          <th>Machine Make</th>
                          <th>Date of Purchase</th>
                          <th>Inspected Date & Time</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr class="trodd" *ngFor="let machineData of machineDataArr">
                          <td>{{ machineData["machineIdentifier"] }}</td>
                          <td>{{ machineData["processName"] }}</td>
                          <td>{{ machineData["machineMakeName"] }}</td>
                          <td>{{ machineData["purchaseDate"] }}</td>
                          <td>03-04-2020 12:33:12 PM</td>
                          <td>
                              <button class="btn btn-primary fa fa-eye" (click)="getSingleMachineDetails(machineData['machineId'])" data-toggle="modal" data-target="#viewMachineModal" style="margin-right: 4px;"></button>
                              <button class="btn btn-warning fa fa-pencil-square" style="margin-right: 4px;"></button>
                              <button class="btn btn-danger fa fa-trash" data-toggle="modal" data-target="#deleteModal"></button>
                          </td>
                      </tr>
                  </tbody>
              </table>-->
            </div>
        </div>
    </div>		
</div>						
      
        </div>
        
        <!-- ==== Footer Starts ==== -->
        <app-footer></app-footer>
        <!-- ==== Footer Starts ==== -->

            </div>
            <!-- ============================================================== -->
            <!-- End PAge Content -->
            <!-- ============================================================== -->
        
        <!-- ============================================================== -->
        <!-- End Container fluid  -->
        <!-- ============================================================== -->
        
</div>
<!-- ============================================================== -->
<!-- End Page wrapper  -->
<!-- ============================================================== -->

<!-- View Modal -->
<div class="modal fade bd-example-modal-lg" id="viewMachineModal" tabindex="-2" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="deleteModalLabel"><b>{{ machineSingleDataArr?.machineIdentifier }}</b></h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <div class="form-row">
            <div class="form-group col-3">
                <label style="display: block;"><b>Process Name</b></label>
                {{ machineSingleDataArr?.processName }}
            </div>  
            <div class="form-group col-3">
              <label style="display: block;"><b>Machine Make Name</b></label>
              {{ machineSingleDataArr?.machineMakeName }}
            </div>
            <div class="form-group col-3">
              <label style="display: block;"><b>Purchase Date</b></label>
              {{ machineSingleDataArr?.purchaseDate }}
            </div>  
            <div class="form-group col-3">
              <label style="display: block;"><b>Machine Type Name</b></label>
              {{ machineSingleDataArr?.machineTypeName }}
            </div>
          </div>
          <div class="form-row" style="margin-top: 20px;">
            <div class="form-group col-3">
              <label style="display: block;"><b>{{ machineSingleDataArr?.machineAttributes[0].attributeName }}</b></label>
              {{ machineSingleDataArr?.machineAttributes[0].attributeValue }}
            </div>  
            <div class="form-group col-3">
              <label style="display: block;"><b>{{ machineSingleDataArr?.machineAttributes[1].attributeName }}</b></label>
              {{ machineSingleDataArr?.machineAttributes[1].attributeValue }}
            </div>
            <div class="form-group col-3">
              <label style="display: block;"><b>{{ machineSingleDataArr?.machineAttributes[2].attributeName }}</b></label>
              {{ machineSingleDataArr?.machineAttributes[2].attributeValue }}
            </div>  
            <div class="form-group col-3">
              <label style="display: block;"><b>{{ machineSingleDataArr?.machineAttributes[3].attributeName }}</b></label>
              {{ machineSingleDataArr?.machineAttributes[3].attributeValue }}
            </div>
          </div>   	
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-dark btn-block" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<ngx-spinner></ngx-spinner>